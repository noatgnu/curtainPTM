
<div class="row">
  <div class="col-7">
    <plotly-plot (legendClick)="legendClickHandler($event)" [config]="config" [divId]="'volcanoPlot'" [data]="graphData" [layout]="graphLayout" [updateOnDataChange]="true" [updateOnLayoutChange]="true" (plotlyClick)="selectData($event)" (selected)="selectData($event)"></plotly-plot>
  </div>
  <div class="col-5">
    <div class="accordion">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button [ngClass]="{'accordion-button': true, 'collapsed': isVolcanoParameterCollapsed}" type="button" (click)="isVolcanoParameterCollapsed=!isVolcanoParameterCollapsed">
            Volcano Plot Settings
          </button>
        </h2>
        <div #collapse="ngbCollapse" [(ngbCollapse)]="isVolcanoParameterCollapsed">
          <div class="card">
            <div class="card-body">
              <div class="d-flex">
                <div class="p-2">
                  <label for="width">
                    Plot Width
                  </label>
                  <input id="width" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoPlotDimension.width">
                </div>
                <div class="p-2">
                  <label for="height">
                    Plot Height
                  </label>
                  <input id="height" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoPlotDimension.height">
                </div>
              </div>
              <div>
                <label for="xTitle">
                  X-axis Title
                </label>
                <input id="xTitle" type="text" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.x">
              </div>
              <div>
                <label for="yTitle">
                  Y-axis Title
                </label>
                <input id="yTitle" type="text" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.y">
              </div>
              <div class="d-flex">
                <div class="p-2">
                  <label for="significant">
                    Significant Cutoff
                  </label>
                  <input id="significant" type="number" class="form-control" [(ngModel)]="settings.settings.pCutoff">
                </div>
                <div class="p-2">
                  <label for="foldchange">
                    Log2 Fold Change Cutoff
                  </label>
                  <input id="foldchange" type="number" class="form-control" [(ngModel)]="settings.settings.log2FCCutoff">
                </div>
              </div>
              <div class="d-flex">
                <div class="p-2">
                  <label for="maxX">
                    Max X axis
                  </label>
                  <input id="maxX" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.maxX">
                </div>
                <div class="p-2">
                  <label for="minX">
                    Min X axis
                  </label>
                  <input id="minX" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.minX">
                </div>
              </div>
              <div class="d-flex">
                <div class="p-2">
                  <label for="maxY">
                    Max Y axis
                  </label>
                  <input id="maxY" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.maxY">
                </div>
                <div class="p-2">
                  <label for="minY">
                    Min Y axis
                  </label>
                  <input id="minY" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.minY">
                </div>
              </div>
              <div class="d-flex">
                <div class="p-2">
                  <label for="plotTitle">
                    Plot Title
                  </label>
                  <input id="plotTitle" type="text" class="form-control" [(ngModel)]="settings.settings.volcanoPlotTitle">
                </div>
                <div class="p-2">
                  <label for="markerSize">Marker Size</label>
                  <input id="markerSize" type="number" class="form-control" [(ngModel)]="markerSize">
                </div>
              </div>
              <div class="d-flex">
                <div class="p-2">
                  <div class="form-group">
                    <label class="form-check-label" for="custom-volcano-text-col">Custom Popup Label Column</label>
                    <select id="custom-volcano-text-col" [(ngModel)]="settings.settings.customVolcanoTextCol" class="form-control">
                      <option [value]="''">Default</option>
                      <option *ngFor="let col of dataService.differential.df.getColumnNames()" [value]="col">{{col}}</option>
                    </select>
                    <small class="text-muted">Changes will only affect newly added annotation ids.</small>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-check">
                    <input type="checkbox" id="backgroundGrey" class="form-check-input" [(ngModel)]="settings.settings.backGroundColorGrey">
                    <label class="form-check-label" for="backgroundGrey">Set Background Data Points Grey</label>
                  </div>
                </div>
              </div>
              <div class="d-flex">
                <div class="p-2">
                  <div class="form-check">
                    <input type="checkbox" id="showVerticalGrid" class="form-check-input" [(ngModel)]="settings.settings.volcanoPlotGrid.x">
                    <label class="form-check-label" for="showVerticalGrid">Show Vertical Grid</label>
                  </div>
                </div>
                <div class="p-2">
                  <div class="form-check">
                    <input type="checkbox" id="showHorizontalGrid" class="form-check-input" [(ngModel)]="settings.settings.volcanoPlotGrid.y">
                    <label class="form-check-label" for="showHorizontalGrid">Show Horizontal Grid</label>
                  </div>
                </div>
              </div>
              <div class="d-flex">
                <div class="p-2">
                  <label for="yaxisPosition">Y-axis position</label>
                  <select id="yaxisPosition" class="form-control" multiple [(ngModel)]="settings.settings.volcanoPlotYaxisPosition">
                    <option value="left">Left</option>
                    <option value="middle">Zero</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="row">
                <div class="col">
                  <div ngbDropdown class="d-inline-block">
                    <button type="button" class="btn btn-primary" id="volcanoAction" ngbDropdownToggle>
                      Volcano Plot Actions
                    </button>
                    <div ngbDropdownMenu aria-labelledby="volcanoAction">
                      <button ngbDropdownItem (click)="drawVolcano()">Redraw Plot</button>
                      <button ngbDropdownItem (click)="FDRCurveSettings()">Custom FDR Curve</button>
                      <button ngbDropdownItem (click)="openCustomColor()">Custom Legend Color</button>
                      <button ngbDropdownItem (click)="openTextEditor()">Annotation Text Editor</button>
                      <!--                <button ngbDropdownItem (click)="download()">Download Volcano Plot</button>-->
                      <button ngbDropdownItem (click)="openWebLogo()">Web Logo Viewer</button>
                      <button ngbDropdownItem (click)="dataService.clear()">Clear Selections</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>


</div>
